<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Y2K Drip Store</title>
<style>
:root{
  --dark-green:#064420; 
  --dark-red:#4e0000; 
  --white:#fff;
  --accent:#00ff7f;
}
html,body{height:100%; margin:0; font-family: Arial, sans-serif; color: var(--white);
  background: linear-gradient(270deg, var(--dark-green), var(--dark-red), var(--dark-green));
  background-size: 600% 600%;
  animation: gradientShift 3s ease infinite;
  overflow-x:hidden;
}
@keyframes gradientShift{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
.wrap{width:100%; max-width:1200px; margin:0 auto;}
@media(max-width:480px){.wrap{max-width:420px;}}
header{background:#000; border-bottom:3px solid #8b0000; padding:12px 16px; display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap;}
header h1{font-size:24px; color:var(--accent); margin:0;}
nav ul{list-style:none; margin:0; padding:0; display:flex; gap:10px; flex-wrap:wrap;}
nav a{color:#fff; text-decoration:none; font-weight:bold; padding:6px 10px; border-radius:6px;}
nav a:hover{background:var(--accent); color:#000;}
.search-bar{padding:12px; display:flex; justify-content:center; gap:8px; background: rgba(0,0,0,.55);} 
.search-bar input{width:60%; max-width:320px; padding:10px; border:0; border-radius:8px;}
.search-bar button{padding:10px 14px; border:0; border-radius:8px; cursor:pointer;
  background: linear-gradient(90deg, var(--dark-red), var(--dark-green));
  background-size:200% 200%; animation: gradientShift 3s ease infinite; color:#fff;}
.banner{height:260px; display:flex; align-items:center; justify-content:center; text-align:center;
  padding:16px; font-size:28px; font-weight:800; text-shadow:2px 2px 6px rgba(0,0,0,.5); background: rgba(0,0,0,.15);}
.tabs{margin:12px auto 0; padding:0 12px;}
.tab-row{display:flex; gap:8px; flex-wrap:wrap; justify-content:center;}
.tab{background:#000; border:1px solid rgba(255,255,255,.15); padding:8px 12px; border-radius:20px; font-size:13px; cursor:pointer;}
.tab.active{background: var(--accent); color:#000;}
.grid{display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:10px; padding:12px;}
@media(min-width:700px){.grid{grid-template-columns: repeat(3, minmax(0,1fr));}}
@media(min-width:1024px){.grid{grid-template-columns: repeat(4, minmax(0,1fr));}}
.card{background: rgba(0,0,0,.55); border:1px solid rgba(255,255,255,.12); border-radius:12px; overflow:hidden;}
.thumb{width:100%; aspect-ratio:1/1; background:#111; object-fit:cover; display:block;}
.info{padding:10px;}
.name{font-weight:700; font-size:14px; margin:0 0 6px;}
.sizes{font-size:12px; opacity:.85;}
.price{margin-top:8px; font-weight:800;}
.ad-block{background:#111; color:#00ff7f; display:flex; align-items:center; justify-content:center; text-align:center; height:10vh; font-size:20px; font-weight:700; border:2px dashed #00ff7f; margin:6px 0;}
.loading, .error{padding:20px; text-align:center; font-weight:700;}
footer{background:#000; border-top:3px solid #8b0000; padding:18px; text-align:center; color:#ccc;}
.about{background: rgba(0,0,0,.55); padding:20px; border-radius:12px; margin:20px 12px; text-align:left;}
.about h2{color:var(--accent);}
.about p{line-height:1.6;}
</style>
</head>
<body>

<header class="wrap">
  <h1>Y2K Drip Store</h1>
  <nav>
    <ul>
      <li><a href="#">Men's Clothing</a></li>
      <li><a href="#">Women's Clothing</a></li>
      <li><a href="#">Kids Clothing</a></li>
      <li><a href="#">Boys Clothing</a></li>
      <li><a href="#">Girls Clothing</a></li>
      <li><a href="#">Sneakers</a></li>
      <li><a href="#">iPhones</a></li>
      <li><a href="#">Laptops</a></li>
      <li><a href="#">Jewelry</a></li>
    </ul>
  </nav>
</header>

<div class="search-bar wrap">
  <input id="search" type="text" placeholder="Search for products..."/>
  <button id="searchBtn">Search</button>
</div>

<div class="banner wrap">Welcome to Y2KDRIPSTORE</div>

<!-- About Us Section -->
<section class="about wrap">
  <h2>About Us</h2>
  <p>Welcome to <strong>Y2K Drip Store</strong>, your ultimate destination for the freshest fashion, sneakers, and top-tier gadgets. We bring style and technology together for a seamless shopping experience. Shop our exclusive collection and stay ahead of the trends!</p>
  <p><strong>Contact us:</strong> WhatsApp: <a href="https://wa.me/0685270789" target="_blank">0685270789</a> | <a href="https://chat.whatsapp.com/HOCcS6OCWWAFfGpJr4nBQs?mode=ac_t" target="_blank">Join our WhatsApp group</a> | <a href="https://www.facebook.com/profile.php?id=61559868803161" target="_blank">Facebook Page</a></p>
  <p><strong>Delivery:</strong> 2 to 7 days nationwide. <strong>Lay-buy:</strong> Get iPhones now for R600 per month while using the device.</p>
  <p><strong>Location:</strong> GAUTENG, JOHANNESBURG, ANDERSON STREET 001.</p>
</section>

<!-- Category Tabs -->
<section class="tabs wrap">
  <div class="tab-row" id="tabRow"></div>
</section>

<!-- Products & Ads Grid -->
<main class="wrap" id="content">
  <div id="status" class="loading">Loading productsâ€¦</div>
  <div id="grid" class="grid" hidden></div>
</main>

<footer>
  &copy; Y2KDRIPSTORE 2025 @ Reserved
</footer>

<!-- Firebase Analytics -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-analytics.js";

const firebaseConfig = {
  apiKey: "AIzaSyCCf-NoeTqAd2ZMUxH118WTVkHfWtwybno",
  authDomain: "y2kdripstore-cf955.firebaseapp.com",
  projectId: "y2kdripstore-cf955",
  storageBucket: "y2kdripstore-cf955.appspot.com",
  messagingSenderId: "463524157257",
  appId: "1:463524157257:web:d385bf676cbbb77f042c98",
  measurementId: "G-DYK3Y1Z492"
};
const app = initializeApp(firebaseConfig);
getAnalytics(app);
</script>

<!-- Google Sheet Products + Currency Conversion -->
<script>
const SHEET_ID = '1K3RwSQVH2x60mFaNo5DCFY8jtncU2CaVOjovTtuB4dU';
const SHEET_CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv`;
const FX_KEY = '88d799cb628598ac17f47565';
const FX_URL = `https://v6.exchangerate-api.com/v6/${FX_KEY}/latest/ZAR`;

let fxRates = { ZAR:1 };
fetch(FX_URL).then(r=>r.json()).then(d=>{ fxRates = d.conversion_rates; });

const visitorCurrency = (navigator.languages && navigator.languages[0])?.split('-')[1] || 'ZAR';

function csvToArray(str, delimiter=','){
  const lines = str.split('\n');
  const headers = lines.shift().split(delimiter);
  return lines.map(l=>{
    const obj = {};
    l.split(delimiter).forEach((v,i)=>obj[headers[i]]=v);
    return obj;
  });
}

let allProducts = [];
const categories = ['MENS CLOTHING','WOMEN CLOTHING','KIDS CLOTHING','BOYS CLOTHING','GIRLS CLOTHING','SNEAKERS','IPHONES','LAPTOPS','JEWELRY'];
const tabRow = document.getElementById('tabRow');
const grid = document.getElementById('grid');
const statusEl = document.getElementById('status');

function buildTabs(activeCat){
  tabRow.innerHTML='';
  categories.forEach(cat=>{
    const btn = document.createElement('button');
    btn.className='tab'+(cat===activeCat?' active':'');
    btn.textContent=cat;
    btn.addEventListener('click',()=>{ renderCategory(cat); });
    tabRow.appendChild(btn);
  });
}

function renderWithAds(items){
  grid.innerHTML='';
  items.forEach((p,i)=>{
    if(i%2===0){
      const ad = document.createElement('div');
      ad.className='ad-block';
      ad.innerText='Advertisement';
      grid.appendChild(ad);
    }
    const card = document.createElement('div'); card.className='card';
    card.innerHTML=`<img class="thumb" src="${p.Image}" alt="${p.Name}"/>
    <div class="info">
      <div class="name">${p.Name}</div>
      <div class="sizes">${p.Sizes}</div>
      <div class="price">${(parseFloat(p.Price)*fxRates[visitorCurrency] || p.Price).toFixed(2)} ${visitorCurrency}</div>
    </div>`;
    grid.appendChild(card);
  });
}

function renderCategory(cat){
  buildTabs(cat);
  const items = allProducts.filter(p=>p.Category?.toUpperCase()===cat);
  statusEl.hidden=true; grid.hidden=false;
  renderWithAds(items);
}

async function loadProducts(){
  try{
    const res = await fetch(SHEET_CSV_URL);
    const text = await res.text();
    allProducts = csvToArray(text).filter(x=>x.Name && x.Image);
    const firstCat = categories.find(c=> allProducts.some(p=>p.Category?.toUpperCase()===c));
    if(firstCat){ renderCategory(firstCat); }
    else{ statusEl.textContent='No products yet. Add rows to your Google Sheet.'; }
  }catch(e){
    statusEl.className='error';
    statusEl.textContent='Error loading products';
    console.error(e);
  }
}

document.getElementById('searchBtn').addEventListener('click', ()=>{
  const q = document.getElementById('search').value.toLowerCase();
  const match = allProducts.filter(p=>(p.Name||'').toLowerCase().includes(q));
  statusEl.hidden=true; grid.hidden=false;
  buildTabs('');
  renderWithAds(match);
});

loadProducts();
</script>
</body>
  </html>
