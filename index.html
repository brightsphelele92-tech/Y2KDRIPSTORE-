<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Y2KDRIPSTORE</title>
<style>
/* Dark Gradient Background Animation */
body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    overflow-x: hidden;
    background: linear-gradient(45deg, #013220, #4B0000, #CC5500, #2F2F2F, #0B0B0B, #800080, #4B2E2E);
    background-size: 1400% 1400%;
    animation: gradientAnimation 28s ease infinite;
}
@keyframes gradientAnimation {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
}
html { scroll-behavior: smooth; }
/* Header */
header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; flex-wrap: wrap; background: rgba(0,0,0,0.5); border-bottom: 1px solid #444; }
.logo { font-size: 28px; font-weight: bold; }
.logo span.red { color: #FF0000; }
.logo span.green { color: #00FF00; }
.logo span.white { color: #FFFFFF; }
nav { display: flex; gap: 10px; flex-wrap: wrap; }
nav a { color: #006400; text-decoration: none; padding: 6px 10px; border-radius: 5px; font-weight: bold; transition: 0.3s; }
nav a:hover { background-color: #004d00; color: #fff; }
.top-buttons { display: flex; gap: 8px; flex-wrap: wrap; }
.top-buttons button { padding: 6px 12px; border-radius: 5px; font-weight: bold; border: none; cursor: pointer; transition: 0.3s; }
.login { background-color: #00FF00; color: #000; }
.signup { background-color: #FF0000; color: #fff; }
.cart { background-color: #FFD700; color: #000; }
/* Search Bar */
.search-container { width: 100%; display: flex; justify-content: center; margin: 10px 0; }
.search-container input { width: 80%; padding: 8px 12px; border-radius: 5px; border: none; font-size: 16px; }
/* Welcome Message */
.welcome {
display: flex;
justify-content: center;
align-items: center;
height: 30vh;
text-align: center;
font-size: 36px;
color: #FFFFFF;
text-shadow: 0 0 10px rgba(255,255,255,0.7);
background: rgba(0,0,0,0.5);
border-radius: 15px;
margin: 10px 20px;
animation: fadeScale 6s ease-in-out infinite;
}
@keyframes fadeScale { 0%, 100% {opacity: 0; transform: scale(0.9);} 50% {opacity: 1; transform: scale(1);} }
/* Product Row */
.product-row { display: flex; overflow-x: auto; gap: 15px; padding: 10px 20px; scroll-behavior: smooth; cursor: grab; }
.product-row.active { cursor: grabbing; }
.product {
flex: 0 0 auto;
width: 180px;
background: rgba(0,0,0,0.4);
border-radius: 10px;
text-align: center;
color: white;
padding: 10px;
cursor: pointer;
transition: transform 0.3s, box-shadow 0.3s;
}
.product:hover {
transform: translateY(-5px);
box-shadow: 0 0 15px rgba(255,255,255,0.4);
}
.product img { width: 100%; border-radius: 5px; }
.product-name { font-weight: bold; margin: 8px 0; }
.product-price { color: #FFD700; }
/* Ad */
.ad {
flex: 0 0 auto;
height: 100px;
width: 180px;
background: rgba(0,0,0,0.5);
color: white;
display: flex;
justify-content: center;
align-items: center;
font-weight: bold;
border-radius: 10px;
}
/* About Section */
.about {
background: rgba(0,0,0,0.7);
color: white;
padding: 30px 20px;
margin: 20px;
border-radius: 15px;
line-height: 1.6;
text-shadow: 0 0 5px rgba(0,0,0,0.2);
}
.about a { color: #FFD700; text-decoration: underline; }
/* Footer */
footer { text-align: center; color: white; padding: 20px 0; font-size: 14px; }
/* Scrollbar Styling */
::-webkit-scrollbar { height: 8px; }
::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 4px; }
/* Responsive Adjustments */
@media (max-width: 1024px) { .product { width: 150px; } .ad { width: 150px; height: 80px; font-size: 14px; } }
@media (max-width: 768px) { header { flex-direction: column; align-items: flex-start; gap: 10px; } .top-buttons { justify-content: flex-start; width: 100%; } .top-buttons button { flex: 1; width: auto; font-size: 14px; padding: 5px 10px; } .welcome { font-size: 24px; height: 25vh; } nav a { padding: 5px 8px; font-size: 14px; } .section-title { font-size: 22px; } .product { width: 140px; padding: 8px; } .ad { width: 140px; height: 70px; font-size: 12px; } .about { font-size: 14px; padding: 20px 10px; } }
@media (max-width: 480px) { .product { width: 120px; } .ad { width: 120px; height: 60px; font-size: 12px; } .welcome { font-size: 20px; height: 20vh; } .search-container input { width: 90%; font-size: 14px; } }
/* Modal */
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.9); justify-content: center; align-items: center; }
.modal-content { background-color: #1a1a1a; margin: auto; padding: 20px; border-radius: 10px; width: 90%; max-width: 600px; color: white; position: relative; }
.close { color: #fff; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
.modal img { width: 100%; border-radius: 8px; }
.modal .product-name { font-size: 24px; margin: 15px 0 5px; }
.modal .product-price { font-size: 20px; color: #FFD700; margin-bottom: 10px; }
.modal .buy-button { background-color: #00FF00; border: none; color: black; padding: 10px 20px; font-weight: bold; border-radius: 5px; cursor: pointer; margin-bottom: 15px; }
.modal .similar-products { margin-top: 15px; }
.similar-row { display: flex; overflow-x: hidden; position: relative; gap: 10px; }
.similar-row-inner { display: flex; gap: 10px; animation: scrollLeft 20s linear infinite; }
@keyframes scrollLeft { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
.similar-product { flex: 0 0 auto; width: 120px; text-align: center; cursor: pointer; }
.similar-product img { width: 100%; border-radius: 5px; }
.similar-product .name { font-size: 14px; color: #fff; }
.similar-product .price { font-size: 14px; color: #FFD700; }
</style>

<!-- AdSense script (your client id already present) -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3351085100403648"
     crossorigin="anonymous"></script>
</head>
<body>
<header>
    <div class="logo"><span class="red">Y2K</span><span class="white">DRIPSTORE</span></div>
    <nav>
        <a href="#home">Home</a><a href="#women">Women</a><a href="#men">Men</a>
        <a href="#girls">Girls</a><a href="#boys">Boys</a><a href="#sneakers">Sneakers</a><a href="#iphones">iPhones</a>
    </nav>
    <div class="top-buttons">
        <button class="login">Login</button>
        <button class="signup">Sign Up</button>
        <button class="cart">Cart</button>
    </div>
</header>

<div class="search-container">
    <input type="text" id="searchInput" placeholder="Search products...">
</div>

<section class="welcome" id="home">WELCOME TO Y2KDRIPSTORE</section>

<div id="main-content"></div>

<!-- Modal -->
<div id="productModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <img id="modalImage" src="" alt="">
        <div class="product-name" id="modalName"></div>
        <div class="product-price" id="modalPrice"></div>

        <!-- Sizes dropdown (populated from sheet sizes column) -->
        <div id="sizeWrapper" style="margin:10px 0;color:white;">
            <label for="sizeSelect" style="font-weight:bold;">Size:</label>
            <select id="sizeSelect" style="margin-left:8px;padding:6px;border-radius:4px;"></select>
        </div>

        <button class="buy-button">Buy Now</button>

        <!-- Modal Ad (replace REPLACE_WITH_SLOT with your ad slot id) -->
        <div class="ad" style="margin-bottom:15px;">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-3351085100403648"
                 data-ad-slot="REPLACE_WITH_SLOT"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>

        <div class="similar-products">
            <h3>Similar Products</h3>
            <div class="similar-row" id="similarRow"></div>
        </div>
    </div>
</div>

<section class="about">
    <h2>About Us</h2>
    <p>Join our <a href="https://chat.whatsapp.com/HOCcS6OCWWAFfGpJr4nBQs?mode=ac_t" target="_blank">WhatsApp group</a> or contact us at <a href="tel:0685270789">0685270789</a>.</p>
    <p>Follow our <a href="https://www.facebook.com/profile.php?id=61559868803161" target="_blank">Facebook page</a>.</p>
    <p>Delivery takes 2 to 7 days. We deliver nationwide and worldwide.</p>
    <p>Business Location: Gauteng, Johannesburg, Anderson Street 001.</p>
    <p>Partnered with: THE BOSS TECH, IMILE, IPHONE STORE, HOODLAND, BUFFALO, and many more.</p>
    <p>Refund policy: Returns accepted within 30 days.</p>
    <p>Website built by <strong>brightsphelele92@</strong></p>
</section>

<footer>©Y2KDRIPSTORE 2025 RESERVED</footer>

<script>
// ==== Sheet Integration ====
// Your SheetDB API (you provided this earlier)
const sheetAPI = 'https://sheetdb.io/api/v1/dmyb12hod7ibm';
let allProducts = [];

// categories order you want on the page
const CATEGORIES_ORDER = ['Home','Women','Men','Girls','Boys','Sneakers','iPhones'];

function renderProducts(products) {
    const main = document.getElementById('main-content');
    main.innerHTML = '';

    CATEGORIES_ORDER.forEach(category => {
        // match sheet 'categories' column case-insensitive
        const categoryData = products.filter(item => (item.categories || '').toString().trim().toLowerCase() === category.toLowerCase());
        if (categoryData.length > 0) {
            const section = document.createElement('div');
            section.id = 'cat-' + category.toLowerCase();
            const title = document.createElement('div');
            title.className = 'section-title';
            title.style.color = '#fff';
            title.style.fontSize = '18px';
            title.style.fontWeight = '700';
            title.style.margin = '12px 20px';
            title.innerText = category.toUpperCase();
            section.appendChild(title);

            for (let i = 0; i < categoryData.length; i += 2) {
                const row = document.createElement('div');
                row.className = 'product-row';

                const prodA = categoryData[i];
                const prodB = categoryData[i+1];

                const idxA = products.indexOf(prodA);
                const idxB = prodB ? products.indexOf(prodB) : -1;

                const partA = `
                <div class="product" data-idx="${idxA}" data-category="${category}">
                    <img src="${prodA.imageURL || ''}" alt="${(prodA.productname || '')}" loading="lazy">
                    <div class="product-name">${prodA.productname || ''}</div>
                    <div class="product-price">R${prodA.price || ''}</div>
                </div>`;

                const partB = prodB ? `
                <div class="product" data-idx="${idxB}" data-category="${category}">
                    <img src="${prodB.imageURL || ''}" alt="${(prodB.productname || '')}" loading="lazy">
                    <div class="product-name">${prodB.productname || ''}</div>
                    <div class="product-price">R${prodB.price || ''}</div>
                </div>` : `<div class="product" style="visibility:hidden;"></div>`;

                row.innerHTML = partA + partB;
                section.appendChild(row);

                // Insert AdSense ad after every two products (replace REPLACE_WITH_SLOT)
                if (i + 2 < categoryData.length) {
                    const ad = document.createElement('div');
                    ad.className = 'ad';
                    ad.innerHTML = `
                        <ins class="adsbygoogle"
                             style="display:block"
                             data-ad-client="ca-pub-3351085100403648"
                             data-ad-slot="REPLACE_WITH_SLOT"
                             data-ad-format="auto"
                             data-full-width-responsive="true"></ins>`;
                    section.appendChild(ad);
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
            }

            main.appendChild(section);
        }
    });

    setupProductClicks();
    setupRowDragScroll();
}

// Fetch products from SheetDB
fetch(sheetAPI)
    .then(res => res.json())
    .then(data => {
        allProducts = data;
        renderProducts(allProducts);
        // initialize any static AdSense blocks (modal ad etc.)
        try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch(e) {}
    })
    .catch(err => {
        console.error('Failed to fetch sheet data:', err);
        document.getElementById('main-content').innerHTML = '<div style="color:white;text-align:center;font-size:18px;margin:20px;">Failed to load products. Check SheetDB URL and sheet headers.</div>';
    });

// ==== Search ====
document.getElementById('searchInput').addEventListener('input', function(){
    const query = this.value.toLowerCase();
    if (query === '') { renderProducts(allProducts); return; }
    const filtered = allProducts.filter(p => (p.productname || '').toString().toLowerCase().includes(query));
    if (filtered.length === 0) {
        document.getElementById('main-content').innerHTML = '<div style="color:white;text-align:center;font-size:24px;margin:20px;">No products found</div>';
    } else {
        renderProducts(filtered);
    }
});

// ==== Modal ====
const modal = document.getElementById('productModal');
const modalImage = document.getElementById('modalImage');
const modalName = document.getElementById('modalName');
const modalPrice = document.getElementById('modalPrice');
const modalSizeSelect = document.getElementById('sizeSelect');
const similarRow = document.getElementById('similarRow');
const closeModal = document.getElementsByClassName('close')[0];

function setupProductClicks(){
    document.querySelectorAll('.product').forEach(p => {
        const idx = parseInt(p.dataset.idx);
        if (isNaN(idx) || idx < 0) return; // skip empty placeholders
        p.addEventListener('click', () => {
            const product = allProducts[idx];
            if (!product) return;

            modalImage.src = product.imageURL || '';
            modalName.innerText = product.productname || '';
            modalPrice.innerText = product.price ? ('R' + product.price) : '';

            // Populate sizes dropdown
            modalSizeSelect.innerHTML = '';
            if (product.sizes && product.sizes.toString().trim() !== '') {
                product.sizes.toString().split(',').map(s => s.trim()).forEach(sz => {
                    const opt = document.createElement('option');
                    opt.value = sz;
                    opt.innerText = sz;
                    modalSizeSelect.appendChild(opt);
                });
            } else {
                const opt = document.createElement('option');
                opt.value = 'One Size';
                opt.innerText = 'One Size';
                modalSizeSelect.appendChild(opt);
            }

            // Similar products (same category)
            const cat = (product.categories || '').toString().trim().toLowerCase();
            const similar = allProducts.filter(pr => (pr.categories || '').toString().trim().toLowerCase() === cat && pr.productname !== product.productname).slice(0,6);
            similarRow.innerHTML = '';
            const innerDiv = document.createElement('div');
            innerDiv.className = 'similar-row-inner';
            similar.forEach(s => {
                const div = document.createElement('div');
                div.className = 'similar-product';
                div.innerHTML = `<img src="${s.imageURL || ''}" alt="${s.productname || ''}"><div class="name">${s.productname||''}</div><div class="price">R${s.price||''}</div>`;
                div.addEventListener('click', () => {
                    // open that product in modal
                    modalImage.src = s.imageURL || '';
                    modalName.innerText = s.productname || '';
                    modalPrice.innerText = s.price ? ('R' + s.price) : '';
                    modalSizeSelect.innerHTML = '';
                    if (s.sizes && s.sizes.toString().trim() !== '') {
                        s.sizes.toString().split(',').map(x=>x.trim()).forEach(sz => {
                            const o = document.createElement('option'); o.value = sz; o.innerText = sz; modalSizeSelect.appendChild(o);
                        });
                    } else {
                        const o = document.createElement('option'); o.value = 'One Size'; o.innerText = 'One Size'; modalSizeSelect.appendChild(o);
                    }
                });
                innerDiv.appendChild(div);
            });
            // duplicate items for continuous scroll effect
            similar.forEach(s => {
                const div = document.createElement('div');
                div.className = 'similar-product';
                div.innerHTML = `<img src="${s.imageURL || ''}" alt="${s.productname || ''}"><div class="name">${s.productname||''}</div><div class="price">R${s.price||''}</div>`;
                innerDiv.appendChild(div);
            });
            similarRow.appendChild(innerDiv);

            modal.style.display = 'flex';
        });
    });
}

closeModal.onclick = function(){ modal.style.display = 'none'; }
window.onclick = function(e){ if (e.target == modal) modal.style.display = 'none'; }

// Buy button (example - currently shows an alert with selected size; connect to your cart/payment)
document.querySelector('.buy-button').addEventListener('click', function(){
    const name = modalName.innerText || 'Product';
    const size = modalSizeSelect.value || 'One Size';
    alert(`Selected: ${name} — Size: ${size}\n(Integrate this with your cart/payment or WhatsApp link.)`);
});

// ==== Touch/Swipe Horizontal Scroll ====
function setupRowDragScroll(){
    document.querySelectorAll('.product-row').forEach(row => {
        let isDown = false;
        let startX;
        let scrollLeft;
        row.addEventListener('mousedown', (e) => { isDown = true; row.classList.add('active'); startX = e.pageX - row.offsetLeft; scrollLeft = row.scrollLeft; });
        row.addEventListener('mouseleave', () => { isDown = false; row.classList.remove('active'); });
        row.addEventListener('mouseup', () => { isDown = false; row.classList.remove('active'); });
        row.addEventListener('mousemove', (e) => { if(!isDown) return; e.preventDefault(); const x = e.pageX - row.offsetLeft; const walk = (x - startX) * 2; row.scrollLeft = scrollLeft - walk; });

        let touchStartX = 0;
        let touchScrollLeft = 0;
        row.addEventListener('touchstart', (e) => { touchStartX = e.touches[0].pageX; touchScrollLeft = row.scrollLeft; });
        row.addEventListener('touchmove', (e) => { const x = e.touches[0].pageX; const walk = (touchStartX - x) * 2; row.scrollLeft = touchScrollLeft + walk; });
    });
}
</script>
</body>
    </html>
