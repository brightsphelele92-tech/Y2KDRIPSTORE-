<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Y2KDRIPSTORE</title>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3351085100403648"
     crossorigin="anonymous"></script>
<style>
/* ---- keep all your previous CSS here ---- */
</style>
</head>
<body>

<header>
  <div class="logo"><span class="red">Y2K</span><span class="white">DRIPSTORE</span></div>
  <nav>
    <a href="#home">Home</a><a href="#women">Women</a><a href="#men">Men</a>
    <a href="#girls">Girls</a><a href="#boys">Boys</a><a href="#sneakers">Sneakers</a><a href="#iphones">iPhones</a>
  </nav>
  <div class="top-buttons">
    <button class="login">Login</button>
    <button class="signup">Sign Up</button>
    <button class="cart">Cart</button>
  </div>
</header>

<div class="search-container">
  <input type="text" id="searchInput" placeholder="Search products...">
</div>

<section class="welcome" id="home">WELCOME TO Y2KDRIPSTORE</section>
<div id="main-content"></div>

<!-- Modal -->
<div id="productModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <img id="modalImage" src="" alt="">
        <div class="product-name" id="modalName"></div>
        <div class="product-price" id="modalPrice"></div>
        
        <label for="sizeSelect" style="display:block;margin:10px 0;color:#fff;font-weight:bold;">Select Size:</label>
        <select id="sizeSelect" style="padding:5px 8px;border-radius:5px;font-size:16px;width:100%;margin-bottom:15px;"></select>
        
        <button class="buy-button">Buy Now</button>
        <div class="ad" style="margin-bottom:15px;">
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-3351085100403648"
               data-ad-slot="YOUR_SLOT_ID"
               data-ad-format="auto"></ins>
        </div>
        <div class="similar-products">
            <h3>Similar Products</h3>
            <div class="similar-row" id="similarRow"></div>
        </div>
    </div>
</div>

<section class="about">
    <!-- keep your about content here -->
</section>

<footer>Â©Y2KDRIPSTORE 2025 RESERVED</footer>

<script>
// ==== Sheet Integration ====
const sheetAPI = 'https://sheetdb.io/api/v1/dmyb12hod7ibm';
let allProducts = [];

function renderProducts(products) {
    const main = document.getElementById('main-content');
    main.innerHTML = '';
    const categories = ['Home','Women','Men','Girls','Boys','Sneakers','iPhones'];
    categories.forEach(category => {
        const categoryData = products.filter(item => item.Category === category);
        if(categoryData.length>0){
            const section = document.createElement('div'); section.id=category.toLowerCase();
            const title = document.createElement('div'); title.className='section-title'; title.innerText=category.toUpperCase(); section.appendChild(title);

            for(let i=0;i<categoryData.length;i+=2){
                const row = document.createElement('div'); row.className='product-row';
                row.innerHTML = `<div class="product" data-index="${i}" data-category="${category}"><img src="${categoryData[i].ImageURL}" alt="${categoryData[i].ProductName}"><div class="product-name">${categoryData[i].ProductName}</div><div class="product-price">${categoryData[i].Price}</div></div>
                <div class="product" data-index="${i+1}" data-category="${category}"><img src="${categoryData[i+1]?.ImageURL}" alt="${categoryData[i+1]?.ProductName}"><div class="product-name">${categoryData[i+1]?.ProductName||''}</div><div class="product-price">${categoryData[i+1]?.Price||''}</div></div>`;
                section.appendChild(row);

                // Ad section every 2 products
                if(i+2<categoryData.length){ 
                    const ad = document.createElement('div'); 
                    ad.className='ad';
                    ad.innerHTML=`<ins class="adsbygoogle"
                        style="display:block"
                        data-ad-client="ca-pub-3351085100403648"
                        data-ad-slot="YOUR_SLOT_ID"
                        data-ad-format="auto"></ins>`;
                    section.appendChild(ad);
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
            }
            main.appendChild(section);
        }
    });
    setupProductClicks();
    setupRowDragScroll(); 
}

// Fetch products from SheetDB
fetch(sheetAPI)
  .then(res=>res.json())
  .then(data=>{allProducts=data;renderProducts(allProducts);})
  .catch(err=>console.error(err));

// ==== Search ====
document.getElementById('searchInput').addEventListener('input', function(){
    const query=this.value.toLowerCase();
    if(query===''){renderProducts(allProducts);return;}
    const filtered=allProducts.filter(p=>p.ProductName.toLowerCase().includes(query));
    if(filtered.length===0){document.getElementById('main-content').innerHTML='<div style="color:white;text-align:center;font-size:24px;margin:20px;">No products found</div>';}
    else{renderProducts(filtered);}
});

// ==== Modal & Sizes ====
const modal=document.getElementById('productModal'); 
const modalImage=document.getElementById('modalImage'); 
const modalName=document.getElementById('modalName'); 
const modalPrice=document.getElementById('modalPrice'); 
const modalSizes=document.getElementById('sizeSelect'); 
const similarRow=document.getElementById('similarRow'); 
const closeModal=document.getElementsByClassName('close')[0];

function setupProductClicks(){
    document.querySelectorAll('.product').forEach(p=>{
        p.addEventListener('click',()=>{
            const index=parseInt(p.dataset.index); 
            const category=p.dataset.category;
            const product=allProducts.find(prod=>prod.Category===category && allProducts.indexOf(prod)===index);
            if(!product) return;
            modalImage.src=product.ImageURL; 
            modalName.innerText=product.ProductName; 
            modalPrice.innerText=product.Price;

            // Populate sizes dropdown
            modalSizes.innerHTML=''; 
            if(product.Sizes && product.Sizes.trim()!==''){
                const sizesArr = product.Sizes.split(',').map(s=>s.trim());
                sizesArr.forEach(size => {
                    const option = document.createElement('option');
                    option.value = size;
                    option.innerText = size;
                    modalSizes.appendChild(option);
                });
            } else {
                const option = document.createElement('option');
                option.value = 'One Size';
                option.innerText = 'One Size';
                modalSizes.appendChild(option);
            }

            // Similar products
            const similar=allProducts.filter(pr=>pr.Category===category && pr.ProductName!==product.ProductName).slice(0,6);
            similarRow.innerHTML=''; 
            const innerDiv=document.createElement('div'); 
            innerDiv.className='similar-row-inner';
            similar.forEach(s=>{
                const div=document.createElement('div'); 
                div.className='similar-product'; 
                div.innerHTML=`<img src="${s.ImageURL}" alt="${s.ProductName}"><div class="name">${s.ProductName}</div><div class="price">${s.Price}</div>`; 
                div.addEventListener('click',()=>{p.click(); modal.scrollTo({top:0,behavior:'smooth'});}); 
                innerDiv.appendChild(div);
            });
            similar.forEach(s=>{
                const div=document.createElement('div'); 
                div.className='similar-product'; 
                div.innerHTML=`<img src="${s.ImageURL}" alt="${s.ProductName}"><div class="name">${s.ProductName}</div><div class="price">${s.Price}</div>`; 
                innerDiv.appendChild(div);
            });
            similarRow.appendChild(innerDiv);

            modal.style.display='flex';
        });
    });
}

// Buy button captures selected size
document.querySelector('.buy-button').onclick = function() {
    const selectedSize = modalSizes.value;
    alert(`You chose ${modalName.innerText} - Size: ${selectedSize}`);
    // You can link this to your payment/cart system
};

closeModal.onclick=function(){modal.style.display='none';}
window.onclick=function(e){if(e.target==modal) modal.style.display='none';}

// ==== Touch/Swipe Horizontal Scroll ====
function setupRowDragScroll(){
    document.querySelectorAll('.product-row').forEach(row => {
        let isDown = false;
        let startX;
        let scrollLeft;
        row.addEventListener('mousedown', (e) => { isDown = true; row.classList.add('active'); startX = e.pageX - row.offsetLeft; scrollLeft = row.scrollLeft; });
        row.addEventListener('mouseleave', () => { isDown = false; row.classList.remove('active'); });
        row.addEventListener('mouseup', () => { isDown = false; row.classList.remove('active'); });
        row.addEventListener('mousemove', (e) => { if(!isDown) return; e.preventDefault(); const x = e.pageX - row.offsetLeft; const walk = (x - startX) * 2; row.scrollLeft = scrollLeft - walk; });

        let touchStartX = 0;
        let touchScrollLeft = 0;
        row.addEventListener('touchstart', (e) => { touchStartX = e.touches[0].pageX; touchScrollLeft = row.scrollLeft; });
        row.addEventListener('touchmove', (e) => { const x = e.touches[0].pageX; const walk = (touchStartX - x) * 2; row.scrollLeft = touchScrollLeft + walk; });
    });
}
</script>

</body>
    </html>
